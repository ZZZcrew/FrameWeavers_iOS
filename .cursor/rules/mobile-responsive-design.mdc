---
description: iOS17+ ç°ä»£å“åº”å¼è®¾è®¡è§„èŒƒ - åŸºäºæœ€æ–°SwiftUIç‰¹æ€§çš„ç®€æ´é«˜æ•ˆå¸ƒå±€æ–¹æ¡ˆ
alwaysApply: true
---
# ğŸ“± iOS17+ ç°ä»£å“åº”å¼è®¾è®¡è§„èŒƒ

**ç›®æ ‡ç³»ç»Ÿ**: iOS17+, iPadOS17+ (ä¸è€ƒè™‘æ›´ä½ç‰ˆæœ¬)
**æ ¸å¿ƒç†å¿µ**: ç®€æ´ã€ç°ä»£ã€é«˜æ•ˆ - å……åˆ†åˆ©ç”¨æœ€æ–°SwiftUIç‰¹æ€§

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. ä¼˜å…ˆä½¿ç”¨ç°ä»£SwiftUIç‰¹æ€§
- **Size Classes** - æ›¿ä»£å¤æ‚çš„è®¾å¤‡æ£€æµ‹
- **ScrollView** - æ›¿ä»£å¤æ‚çš„GeometryReaderå¸ƒå±€
- **Environment Values** - å“åº”ç³»ç»Ÿè®¾ç½®å˜åŒ–
- **Dynamic Type** - ç³»ç»Ÿçº§å­—ä½“ç¼©æ”¾æ”¯æŒ

### 2. ç¦æ­¢è¿‡åº¦å·¥ç¨‹åŒ–
- âŒ **ç¦æ­¢**è‡ªå®šä¹‰è®¾å¤‡é€‚é…å·¥å…·ç±»
- âŒ **ç¦æ­¢**å¤æ‚çš„GeometryReaderåµŒå¥—
- âŒ **ç¦æ­¢**æ‰‹åŠ¨è®¡ç®—å±å¹•å°ºå¯¸
- âŒ **ç¦æ­¢**å›ºå®šåƒç´ å€¼å¸ƒå±€
- âŒ **ç¦æ­¢**é”™è¯¯ä½¿ç”¨ViewThatFits (è¯¦è§æ¨ªå±é€‚é…ç« èŠ‚)

## ğŸ—ï¸ ç°ä»£å¸ƒå±€æ¶æ„

### åŸºç¡€å“åº”å¼æ¨¡æ¿
```swift
struct ModernResponsiveView: View {
    // MARK: - Environment
    @Environment(\.horizontalSizeClass) private var horizontalSizeClass
    @Environment(\.verticalSizeClass) private var verticalSizeClass

    var body: some View {
        ScrollView {
            VStack(spacing: adaptiveSpacing) {
                Spacer(minLength: topSpacing)

                // å†…å®¹ç»„ä»¶
                contentView

                Spacer(minLength: bottomSpacing)
            }
            .padding(.horizontal, horizontalPadding)
            .frame(maxWidth: .infinity)
        }
    }
}

// MARK: - Adaptive Properties
private extension ModernResponsiveView {
    var isCompact: Bool {
        horizontalSizeClass == .compact || verticalSizeClass == .compact
    }

    var adaptiveSpacing: CGFloat { isCompact ? 16 : 24 }
    var topSpacing: CGFloat { isCompact ? 20 : 40 }
    var bottomSpacing: CGFloat { isCompact ? 20 : 40 }
    var horizontalPadding: CGFloat { isCompact ? 20 : 40 }
}
```

## ğŸ”¤ ç°ä»£å­—ä½“ç³»ç»Ÿ

### ç³»ç»Ÿå­—ä½“æ ·å¼ (iOS17+)
```swift
// âœ… æ¨èï¼šä½¿ç”¨ç³»ç»Ÿå­—ä½“æ ·å¼
Text("æ ‡é¢˜").font(.largeTitle)     // 34pt - é¡µé¢å¤§æ ‡é¢˜
Text("æ ‡é¢˜").font(.title)         // 28pt - é¡µé¢æ ‡é¢˜
Text("æ ‡é¢˜").font(.title2)        // 22pt - æ¬¡è¦æ ‡é¢˜
Text("å†…å®¹").font(.body)          // 17pt - æ­£æ–‡å†…å®¹
Text("è¯´æ˜").font(.callout)       // 16pt - è¯´æ˜æ–‡å­—
Text("è„šæ³¨").font(.footnote)      // 13pt - è„šæ³¨
Text("æ ‡ç­¾").font(.caption)       // 12pt - å›¾ç‰‡è¯´æ˜

// âŒ ç¦æ­¢ï¼šå›ºå®šå­—ä½“å¤§å°
Text("æ ‡é¢˜").font(.system(size: 28)) // ç¦æ­¢ä½¿ç”¨
```

### åŠ¨æ€ç±»å‹æ”¯æŒ
```swift
// âœ… é™åˆ¶å­—ä½“å¤§å°èŒƒå›´
Text("å†…å®¹")
    .font(.body)
    .dynamicTypeSize(...DynamicTypeSize.accessibility1) // é™åˆ¶æœ€å¤§å­—ä½“

// âœ… å“åº”åŠ¨æ€ç±»å‹å˜åŒ–
@Environment(\.dynamicTypeSize) var dynamicTypeSize

var adaptiveFont: Font {
    dynamicTypeSize.isAccessibilitySize ? .title3 : .body
}
```

### è‡ªå®šä¹‰å­—ä½“çš„ç°ä»£ç”¨æ³•
```swift
// âœ… æ”¯æŒåŠ¨æ€ç±»å‹çš„è‡ªå®šä¹‰å­—ä½“
Text("å†…å®¹")
    .font(.custom("STKaiti", size: 18))
    .dynamicTypeSize(...DynamicTypeSize.large) // é™åˆ¶èŒƒå›´
```

## ğŸ“ Size Classes å“åº”å¼è®¾è®¡

### åŸºç¡€Size Classesåˆ¤æ–­
```swift
@Environment(\.horizontalSizeClass) private var horizontalSizeClass
@Environment(\.verticalSizeClass) private var verticalSizeClass

// ç®€æ´çš„å“åº”å¼åˆ¤æ–­
var isCompact: Bool {
    horizontalSizeClass == .compact
}

// åŸºäºSize Classesçš„å¸ƒå±€
var body: some View {
    if horizontalSizeClass == .compact {
        compactLayout    // iPhoneç«–å±ã€iPadåˆ†å±
    } else {
        regularLayout    // iPadæ¨ªå±ã€iPhoneæ¨ªå±
    }
}
```

### è®¾å¤‡é€‚é…ç­–ç•¥
- **iPhone**: ä¸»è¦ä½¿ç”¨ `.compact` æ°´å¹³å°ºå¯¸ç±»
- **iPad**: ä¸»è¦ä½¿ç”¨ `.regular` æ°´å¹³å°ºå¯¸ç±»
- **åˆ†å±/å¤šçª—å£**: è‡ªåŠ¨é€‚é…ä¸º `.compact`
- **æ¨ªç«–å±**: é€šè¿‡ `verticalSizeClass` åˆ¤æ–­

## ğŸ”„ æ¨ªå±é€‚é…æœ€ä½³å®è·µ

### æ¨ªå±æ£€æµ‹çš„æ­£ç¡®æ–¹æ³•
```swift
// âœ… æ­£ç¡®ï¼šåŸºäºSize Classesçš„æ¨ªå±æ£€æµ‹
var isLandscape: Bool {
    horizontalSizeClass == .compact && verticalSizeClass == .compact
}

// âŒ é”™è¯¯ï¼šå•ç‹¬ä½¿ç”¨verticalSizeClass
var isLandscape: Bool {
    verticalSizeClass == .compact  // ä¸å¯é 
}
```

### æ¨ªå±å¸ƒå±€ç­–ç•¥
```swift
// âœ… æ¨èï¼šåŒå¸ƒå±€ç³»ç»Ÿ
var body: some View {
    if horizontalSizeClass == .compact && verticalSizeClass == .compact {
        // iPhoneæ¨ªå±ï¼šä½¿ç”¨HStackæ°´å¹³å¸ƒå±€
        landscapeLayout
    } else {
        // ç«–å±æˆ–iPadï¼šä½¿ç”¨VStackå‚ç›´å¸ƒå±€
        portraitLayout
    }
}

// æ¨ªå±å¸ƒå±€ï¼šå»é™¤ScrollViewï¼Œç›´æ¥ä½¿ç”¨HStack
var landscapeLayout: some View {
    HStack(spacing: compactSpacing) {
        VStack { /* å·¦ä¾§å†…å®¹ */ }
        VStack { /* å³ä¾§å†…å®¹ */ }
    }
    .padding(.horizontal, compactPadding)
    .frame(maxWidth: .infinity, maxHeight: .infinity)
}

// ç«–å±å¸ƒå±€ï¼šæ ¹æ®å†…å®¹å†³å®šæ˜¯å¦ä½¿ç”¨ScrollView
var portraitLayout: some View {
    // å¦‚æœå†…å®¹é€‚åˆå±å¹•ï¼Œå¯ä»¥ä¸ä½¿ç”¨ScrollView
    VStack(spacing: regularSpacing) {
        Spacer(minLength: topSpacing)
        // å‚ç›´æ’åˆ—çš„å†…å®¹
        Spacer(minLength: bottomSpacing)
    }
    .padding(.horizontal, regularPadding)
    .frame(maxWidth: .infinity, maxHeight: .infinity)

    // æˆ–è€…ä½¿ç”¨ScrollViewï¼ˆå†…å®¹è¾ƒå¤šæ—¶ï¼‰
    // ScrollView {
    //     VStack(spacing: regularSpacing) {
    //         // å‚ç›´æ’åˆ—çš„å†…å®¹
    //     }
    //     .padding(.horizontal, regularPadding)
    // }
}
```

### ViewThatFitsä½¿ç”¨æ³¨æ„äº‹é¡¹
```swift
// âŒ é”™è¯¯ï¼šViewThatFitsä¸é€‚åˆæ¨ªå±é€‚é…
ViewThatFits(in: .vertical) {
    portraitLayout
    landscapeLayout
}

// âœ… æ­£ç¡®ï¼šViewThatFitsé€‚åˆå†…å®¹è‡ªé€‚åº”
ViewThatFits {
    // ä¼˜å…ˆæ˜¾ç¤ºå®Œæ•´å†…å®¹
    HStack { icon; title; description; button }

    // ç©ºé—´ä¸è¶³æ—¶ç®€åŒ–
    VStack { icon; title; button }

    // æœ€å°å¸ƒå±€
    VStack { title; button }
}
```

### æ¨ªå±é€‚é…åŸåˆ™
1. **ç§»é™¤ScrollView**ï¼šæ¨ªå±æ—¶é€šå¸¸ä¸éœ€è¦æ»šåŠ¨ï¼Œç›´æ¥ä½¿ç”¨HStack
2. **ä½¿ç”¨HStack**ï¼šæ°´å¹³æ’åˆ—ä¸»è¦å†…å®¹
3. **é€‚å½“è°ƒæ•´å°ºå¯¸**ï¼šæ¨ªå±ç»„ä»¶å¯ä»¥æ¯”ç«–å±ç¨å¤§ï¼Œå……åˆ†åˆ©ç”¨æ°´å¹³ç©ºé—´
4. **å›ºå®šé«˜åº¦**ï¼šä½¿ç”¨`.frame(maxHeight: .infinity)`å¡«æ»¡å±å¹•
5. **ç®€åŒ–å†…å®¹**ï¼šå¿…è¦æ—¶éšè—æ¬¡è¦å…ƒç´ 
6. **ç«–å±ä¹Ÿå¯æ— ScrollView**ï¼šå¦‚æœå†…å®¹é€‚åˆå±å¹•ï¼Œç«–å±ä¹Ÿå¯ç§»é™¤ScrollView

## ğŸ¨ ç°ä»£å¸ƒå±€ç»„ä»¶

### å¸ƒå±€é€‰æ‹©ç­–ç•¥
```swift
// âœ… å†…å®¹é€‚åˆå±å¹•æ—¶ï¼šç›´æ¥ä½¿ç”¨VStack (æ¨è)
VStack(spacing: adaptiveSpacing) {
    Spacer(minLength: topSpacing)

    // å†…å®¹ç»„ä»¶
    welcomeIcon
    welcomeText
    actionButton
    hintText

    Spacer(minLength: bottomSpacing)
}
.padding(.horizontal, horizontalPadding)
.frame(maxWidth: .infinity, maxHeight: .infinity)

// âœ… å†…å®¹è¾ƒå¤šæ—¶ï¼šä½¿ç”¨ScrollView + VStack
ScrollView {
    VStack(spacing: adaptiveSpacing) {
        // å†…å®¹ç»„ä»¶
        welcomeIcon
        welcomeText
        actionButton
        hintText
    }
    .padding(.horizontal, horizontalPadding)
    .frame(maxWidth: .infinity)
}

// âŒ æ—§æ¨¡å¼ - å¤æ‚ä¸”æ€§èƒ½å·®
GeometryReader { geometry in
    VStack(spacing: 0) {
        DeviceAdaptation.responsiveSpacer(...)  // ç¦æ­¢
        // å¤æ‚çš„è®¡ç®—é€»è¾‘
    }
}
```

### ViewThatFits è‡ªé€‚åº”å¸ƒå±€ (iOS16+)
```swift
// âœ… è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å¸ƒå±€
ViewThatFits {
    // ä¼˜å…ˆæ˜¾ç¤ºå®Œæ•´å¸ƒå±€
    HStack(spacing: 20) {
        image
        VStack { title; description }
        actionButton
    }

    // ç©ºé—´ä¸è¶³æ—¶çš„ç®€åŒ–å¸ƒå±€
    VStack(spacing: 12) {
        image
        title
        actionButton
    }

    // æœ€å°å¸ƒå±€
    VStack(spacing: 8) {
        title
        actionButton
    }
}
```

### å“åº”å¼é—´è·å’Œå°ºå¯¸
```swift
// âœ… åŸºäºSize Classesçš„å“åº”å¼å±æ€§
private extension View {
    var isCompact: Bool { horizontalSizeClass == .compact }
    var isLandscape: Bool {
        horizontalSizeClass == .compact && verticalSizeClass == .compact
    }

    // ç«–å±å±æ€§
    var portraitSpacing: CGFloat { isCompact ? 16 : 24 }
    var portraitPadding: CGFloat { isCompact ? 20 : 40 }
    var portraitIconSize: CGFloat { isCompact ? 70 : 90 }

    // æ¨ªå±å±æ€§ (å¯ä»¥æ¯”ç«–å±ç¨å¤§)
    var landscapeSpacing: CGFloat { 30 }
    var landscapePadding: CGFloat { 25 }
    var landscapeIconSize: CGFloat { 80 }  // æ¯”ç«–å±compact(70)å¤§
}

// âœ… ä½¿ç”¨ç³»ç»Ÿé—´è·
VStack(spacing: .systemSpacing) { ... }  // iOS17+
HStack(spacing: .systemSpacing) { ... }

// è¯¦ç»†çš„å±æ€§å®šä¹‰è¯·å‚è€ƒ"åŒå¸ƒå±€ç³»ç»Ÿæœ€ä½³å®è·µ"ç« èŠ‚
```

## ğŸ”€ åŒå¸ƒå±€ç³»ç»Ÿæœ€ä½³å®è·µ

### å®Œæ•´çš„åŒå¸ƒå±€å®ç°
```swift
struct AdaptiveView: View {
    @Environment(\.horizontalSizeClass) private var horizontalSizeClass
    @Environment(\.verticalSizeClass) private var verticalSizeClass

    var body: some View {
        ZStack {
            backgroundImage

            if horizontalSizeClass == .compact && verticalSizeClass == .compact {
                landscapeLayout  // iPhoneæ¨ªå±
            } else {
                portraitLayout   // ç«–å±æˆ–iPad
            }
        }
    }
}

// MARK: - Layout Components
private extension AdaptiveView {
    var portraitLayout: some View {
        VStack(spacing: portraitSpacing) {
            Spacer(minLength: portraitTopSpacing)
            portraitTitleText
            Spacer(minLength: portraitMiddleSpacing)
            portraitMainContent
            Spacer(minLength: portraitBottomSpacing)
            portraitActionButton
            Spacer(minLength: portraitEndSpacing)
        }
        .padding(.horizontal, portraitPadding)
        .frame(maxWidth: .infinity, maxHeight: .infinity)
    }

    var landscapeLayout: some View {
        HStack(spacing: landscapeSpacing) {
            VStack(spacing: 15) {
                landscapeTitleText
                landscapeMainContent
            }
            .frame(maxWidth: .infinity)

            VStack {
                Spacer()
                landscapeActionButton
                Spacer()
            }
            .frame(width: landscapeButtonAreaWidth)
        }
        .padding(.horizontal, landscapePadding)
        .padding(.vertical, 10)
        .frame(maxWidth: .infinity, maxHeight: .infinity)
    }
}

// MARK: - Adaptive Properties
private extension AdaptiveView {
    var isCompact: Bool { horizontalSizeClass == .compact }

    // ç«–å±å±æ€§
    var portraitSpacing: CGFloat { isCompact ? 16 : 24 }
    var portraitTopSpacing: CGFloat { isCompact ? 20 : 40 }
    var portraitMiddleSpacing: CGFloat { isCompact ? 30 : 50 }
    var portraitBottomSpacing: CGFloat { isCompact ? 40 : 60 }
    var portraitEndSpacing: CGFloat { isCompact ? 20 : 40 }
    var portraitPadding: CGFloat { isCompact ? 20 : 40 }
    var portraitContentSize: CGFloat { isCompact ? 280 : 350 }

    // æ¨ªå±å±æ€§
    var landscapeSpacing: CGFloat { 30 }
    var landscapePadding: CGFloat { 25 }
    var landscapeContentSize: CGFloat { 240 }  // æ¯”ç«–å±compactç¨å¤§
    var landscapeButtonAreaWidth: CGFloat { 220 }
}
```

## ğŸ§ª æµ‹è¯•æ£€æŸ¥æ¸…å•

### å¿…æµ‹é¡¹ç›®
- [ ] iPhone 15 Pro (æ ‡å‡†ç«–å±)
- [ ] iPhone 15 Pro (æ¨ªå±) - é‡ç‚¹æµ‹è¯•
- [ ] iPhone 15 Pro Max (å¤§å±)
- [ ] iPad Pro 12.9" (å¹³æ¿)
- [ ] æ¨ªç«–å±åˆ‡æ¢æµç•…æ€§
- [ ] åŠ¨æ€å­—ä½“å¤§å°è°ƒæ•´
- [ ] åˆ†å±æ¨¡å¼ (iPad)

### æ¨ªå±é€‚é…æµ‹è¯•
- [ ] æ‰€æœ‰å†…å®¹éƒ½åœ¨å±å¹•å†…å¯è§
- [ ] ç»„ä»¶å¤§å°åˆé€‚ï¼Œä¸ä¼šè¿‡å°
- [ ] å¸ƒå±€ç¾è§‚ï¼Œå·¦å³åˆ†å¸ƒåˆç†
- [ ] æ— éœ€æ»šåŠ¨å³å¯çœ‹åˆ°æ‰€æœ‰å†…å®¹

### åŠ¨æ€ç±»å‹æµ‹è¯•
- [ ] è®¾ç½® â†’ æ˜¾ç¤ºä¸äº®åº¦ â†’ æ–‡å­—å¤§å°
- [ ] æµ‹è¯•æœ€å¤§è¾…åŠ©åŠŸèƒ½å­—ä½“
- [ ] ç¡®ä¿å†…å®¹ä¸è¢«æˆªæ–­

## âš ï¸ ç¦æ­¢äº‹é¡¹

### ç»å¯¹ç¦æ­¢
- âŒ åˆ›å»ºè‡ªå®šä¹‰è®¾å¤‡é€‚é…å·¥å…·ç±» (å¦‚ `DeviceAdaptation`)
- âŒ ä½¿ç”¨ `UIDevice.current` æ£€æµ‹è®¾å¤‡ç±»å‹
- âŒ æ‰‹åŠ¨è®¡ç®—å±å¹•å°ºå¯¸å’Œæ¯”ä¾‹
- âŒ ä½¿ç”¨å›ºå®šåƒç´ å€¼ (å¦‚ `width: 350`)
- âŒ å¤æ‚çš„ `GeometryReader` åµŒå¥—
- âŒ è‡ªå®šä¹‰æ–‡å­—é«˜åº¦ç¼“å­˜ç±»
- âŒ é”™è¯¯ä½¿ç”¨ `ViewThatFits(in: .vertical)` è¿›è¡Œæ¨ªå±é€‚é…
- âŒ æ¨ªå±æ—¶ä»ä½¿ç”¨ScrollViewå¯¼è‡´å†…å®¹è¶…å‡ºå±å¹•
- âŒ æ¨ªå±ç»„ä»¶è¿‡å°ï¼Œæµªè´¹æ°´å¹³ç©ºé—´
- âŒ ç«–å±å†…å®¹é€‚åˆæ—¶ä»å¼ºåˆ¶ä½¿ç”¨ScrollView

### æ€§èƒ½ç¦å¿Œ
- âŒ è¿‡åº¦ä½¿ç”¨ `GeometryReader`
- âŒ åœ¨è§†å›¾ä¸­è¿›è¡Œå¤æ‚è®¡ç®—
- âŒ å¿½ç•¥ `@Environment` çš„æ€§èƒ½ä¼˜åŠ¿
- âŒ æ¨ªå±æ—¶ä½¿ç”¨è¿‡å¤§çš„ç»„ä»¶å°ºå¯¸

## ğŸ“š Appleå®˜æ–¹æ–‡æ¡£
- [Human Interface Guidelines - Layout](https://developer.apple.com/design/human-interface-guidelines/layout)
- [SwiftUI Size Classes](https://developer.apple.com/documentation/swiftui/environmentvalues/horizontalsizeclass)
- [Dynamic Type](https://developer.apple.com/documentation/uikit/uifont/scaling_fonts_automatically)
